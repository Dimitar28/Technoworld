<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title id="product-name"></title>
    <link rel="icon" href="./assets/comp-favicon.ico" />
    <link rel="stylesheet" href="styleproductpage.css" />
  </head>
  <body>
    <main>
      <section class="product-info ">
        <div id="product-image"></div>
        <div class="product-descr">
          <h3 id="product-name"></h3>
          <p>Безплатна доставка до пощенски код 1000</p>
          <p id="product-price"></p>
          <button class="add-to-cart">
            <i class="fa fa-shopping-cart"></i> Add to Cart
          </button>
        </div>
      </section>
      <div class="main-section">
        <h2>Product Information</h2>
        <input type="radio" id="description-tab" name="tabs" checked>
        <label for="description-tab">Desciption</label>
        <input type="radio" id="characteristics-tab" name="tabs" >
        <label for="characteristics-tab">Characteristics</label>
        <input type="radio" id="availability-tab" name="tabs" >
        <label for="availability-tab">Availability</label>
        <input type="radio" id="reviews-tab" name="tabs" >
        <label for="reviews-tab">Reviews</label>
        <section id="description-content">
          <h3>Desciption</h3>
          <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dignissimos odio fuga illum quisquam, nisi voluptatem, porro aut id molestias libero, minus asperiores reprehenderit rem ut non aliquam ad totam fugit.</p>
        </section>
        <section id="characteristics-content">
          <h3>Characteristics</h3>
          <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dignissimos odio fuga illum quisquam, nisi voluptatem, porro aut id molestias libero, </p>
        </section>
        <section id="availability-content">
          <h3>Availability</h3>
          <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dignissimos odio fuga illum quisquam, nisi voluptatem, porro aut id molestias libero, minus asperiores reprehenderit rem ut non aliquam ad totam fugit. minus asperiores reprehenderit rem ut non aliquam ad totam fugit.</p>
        </section>
        <section id="reviews-content">
          <h3>Reviews</h3>
          <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dignissimos odio fuga illum quisquam, nisi voluptatem, porro aut id molestias libero, minus asperiores reprehenderit rem ut non aliquam ad totam fugit.</p>
        </section>
      </div>
    </main>
    <script>
      function validateQueryString(query) {
        const validTypes = ["string", "number"];
        const queryParams = new URLSearchParams(query);

        for (const [key, value] of queryParams) {
          if (!validTypes.includes(typeof value)) {
            throw new Error(
              `Invalid type for ${key}: ${typeof value}. Only ${validTypes.join(
                " and "
              )} are allowed.`
            );
          }
        }

        return true;
      }

      //query string
      const urlParams = new URLSearchParams(window.location.search);

      try {
        validateQueryString(window.location.search);
        const productName = urlParams.get("name");
        const productImage = urlParams.get("image");
        const productPrice = urlParams.get("price");

        const image = document.querySelector("#product-image");
        const names = document.querySelectorAll("#product-name");
        const price = document.querySelector("#product-price");
        image.innerHTML = `<img src="${productImage}" alt="${productName}">`;
        names.forEach((name) => (name.innerHTML = productName));
        price.innerHTML = `Price: $${productPrice}`;
      } catch (error) {
        console.error(error);
        window.location.href = "/";
      }
    </script>
  </body>
</html>
